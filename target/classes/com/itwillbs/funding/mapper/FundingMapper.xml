<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.itwillbs.funding.mapper.FundingMapper">
<!-- funding 페이지 쿼리 -->
	<select id="selectFundingProject" resultType="com.itwillbs.funding.vo.ProjectListVO">
		select p.project_idx, project_thumbnail, project_plan, project_detail_amount, project_target, project_end_date, project_title, maker_name
		from project p inner 
		join project_detail pd on p.project_idx = pd.project_idx inner 
		join maker m on p.member_idx =m.member_idx 
		where 	project_approve = '1' 
				and project_type = '1'
				and DATE_FORMAT(NOW(), '%Y-%m-%d') >= project_start_date
				and project_end_date >= DATE_FORMAT(NOW(), '%Y-%m-%d') ;
	</select>
<!-- 	funding detail 페이지 쿼리 -->
	<select id="selectFundingDetail" resultType="map">
		select * from project p 
				 inner join project_detail pd on p.project_idx = pd.project_idx  
				 WHERE p.project_idx = #{project_idx};
	</select>
	<select id="selectMaker" resultType="map">
		select * from maker
				where member_idx = #{member_idx}
	</select>
	<select id="selectReward" resultType="com.itwillbs.funding.vo.RewardVO">
		select * from reward
				 where project_idx = #{project_idx}
	</select>
</mapper>