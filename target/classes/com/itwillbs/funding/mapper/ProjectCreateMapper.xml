<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.itwillbs.funding.mapper.ProjectCreateMapper">
  
  	
  	<!-- 05-16 김동욱 top.jsp에서 프로젝트 만들기 버튼 누를 시 새로운 프로젝트 생성 -->
  	<!-- 05-12 project_images가 프로젝트 생성될 떄 null 스트링이 들어가도록 수정 -->
 	<insert id="createFundingProject">
 		INSERT INTO project VALUES(
 			null
 			, ${member_idx}
 			, null
 			, null
 			, null
 			, null
 			, null
 			, ""
 			, null
 			, null
 			, null
 			, null
 			, null
 			, null
 			, null
 			, null
 			, now()
 			)
 	</insert>
 	
 	<!-- 05-16 김동욱 메이커 마이페이지에 프로젝트 리스트 출력 -->
 	<select id="getProjectList" resultType="com.itwillbs.funding.vo.ProjectVO">
 		SELECT *
 		FROM project
 		WHERE member_idx = ${member_idx};
 	</select>
 	
 	<!-- 05-17 김동욱 프로젝트 스토리 작성 업데이트(project_summary, project_content, project_image) -->
 	<!-- 05-22 김동욱 프로젝트 스토리 업데이트에서 project_images 삭제 -->
 	<update id="projectStoryUpdate">
 		UPDATE project SET
 		project_summary = #{project_summary}
 		,project_content = #{project_content}
 		where project_idx = #{project_idx}
 	</update>
 	
 	<!-- 05-17 김동욱 프로젝트 리워드 추가 -->
 	<insert id="projectRewardAdd">
 		INSERT INTO reward
 			VALUES(null
 				   , #{project_idx}
 				   , #{reward_name}
 				   , #{reward_amount}
 				   , #{reward_content}
 				   , #{reward_option}
 				   , #{reward_quantity}
 				   , #{reward_delivery}
 				   , #{reward_delivery_fee}
 				   , #{reward_delivery_date}
 				   , "0"
 				   )
 	</insert>
 	
 	<!-- 05-17 김동욱 프로젝트 리워드 리스트 -->
 	<select id="getProjectReward" resultType="com.itwillbs.funding.vo.RewardVO">
 		SELECT *
 		FROM reward
 		WHERE project_idx = #{project_idx}
 	</select>
 	
 	<!-- 05-18 김동욱 AJAX 리워드 상세 정보 가져오기 -->
 	<select id="getRewardDetail" resultType="com.itwillbs.funding.vo.RewardVO">
 		SELECT *
 		FROM reward
 		WHERE reward_idx = #{reward_idx}
 	</select>
 	
 	<!-- 05-19 김동욱 AJAX 리워드 정보 수정하기-->
 	<update id="rewardModify">
 		UPDATE reward SET
 			reward_name = #{reward_name}
 			, reward_amount = #{reward_amount}
 			, reward_content = #{reward_content}
 			, reward_option = #{reward_option}
 			, reward_quantity = #{reward_quantity}
 			, reward_delivery = #{reward_delivery}
 			, reward_delivery_fee = #{reward_delivery_fee}
 			, reward_delivery_date = #{reward_delivery_date}
 			WHERE reward_idx = #{reward_idx}
 	</update>
 	
 	<!-- 05-19 김동욱 AJAX 리워드 삭제하기 -->
 	<delete id="rewardDelete">
 		DELETE FROM reward WHERE reward_idx = #{reward_idx}
 	</delete>
 	
 	<!-- 05-22 김동욱 기존 등록된 이미지 가져오기 -->
 	<select id="getImages" resultType="String">
 		SELECT project_images
 		FROM project
 		WHERE project_idx = #{project_idx}
 	</select>
 	
 	<!-- 05-22 김동욱 AJAX 이미지 추가 -->
 	<update id="projectAddImages">
 		UPDATE project SET project_images = #{project_images}
 		WHERE project_idx = #{project_idx}
 	</update>
 	
 	<select id="getProjectStory" resultType="com.itwillbs.funding.vo.ProjectVO">
 		SELECT project_summary, project_content
 		FROM project
 		WHERE project_idx = #{project_idx}
 	</select>
 	
  </mapper>